This is a test for #658: a kernel panic seen when patching an exported
function (e.g., kmalloc) which is used by patch_init().
---
diff -Nupr src.orig/mm/slub.c src/mm/slub.c
--- src.orig/mm/slub.c	2017-10-05 09:46:31.525226427 -0400
+++ src/mm/slub.c	2017-10-05 09:46:48.550300149 -0400
@@ -3730,6 +3730,9 @@ void *__kmalloc(size_t size, gfp_t flags
 	struct kmem_cache *s;
 	void *ret;
 
+	if (!jiffies)
+		printk("kpatch kmalloc\n");
+
 	if (unlikely(size > KMALLOC_MAX_CACHE_SIZE))
 		return kmalloc_large(size, flags);
 
